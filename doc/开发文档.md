# 概述
guardian项目的所有业务模块开发完全基于JDK的服务提供者框架（Service Provider Interface），guardian模块开发者只需要遵循JDK的服务提供者框架规范，
可以任意的增加子模块,实现自己需要的相应的业务功能。所有的模块加载工作有guardian项目完成，模块开发者不需要关心其细节。

# guardian模块开发步骤
所有的guardian插件模块都必须实现GuardianModule接口

```java
public interface GuardianModule {
    // 设置配置
    void setGuardianContainer(ConnectionPools connectionPools, ProxyContainer proxyContainer);

    // 是否激活该ChannelHandler
    boolean isActivate();

    // 获取ChannelHandler
    ChannelHandler getChannelHandler(SocketChannel socketChannel);
}
```

其开发步骤如下：

1. 添加业务模块
(1) 在业务模块中添加GuardianModule的实现类及本模块需要获取的配置文件参数类；
(2) 在resources/META-INF/services目录中添加com.test.guardian.core.GuardianModule文件，文件中的内容为GuardianModule的实现类的完整类路径；

2. 在配置文件(starter模块中resources/guardian.yml)中添加新开发的模块名

# 举例
比如，我们需要开发http2模块,其步骤如下：
1. 添加guardian-http2模块
 (1) 添加GuardianModule的实现类Http2Module、配置文件类Http2Option

```java
public class Http2Module implements GuardianModule{
    private Http2Option http2Option;
    @Override
    public void setGuardianContainer(ConnectionPools connectionPools, ProxyContainer proxyContainer) {
        // 获取http2模块的配置参数
        http2Option = proxyContainer.get(Http2Option.class);
    }

    @Override
    public boolean isActivate() {
        // 是否激活
        return !http2Option.isHttp();
    }

    @Override
    public ChannelHandler getChannelHandler(SocketChannel socketChannel) {
        // 设置本模块的业务处理hander
        return new Http2FrameCodec(true);
    }
}
```
```
public class Http2Option {
    private boolean http;

    public boolean isHttp() {
        return http;
    }

    public void setHttp(boolean http) {
        this.http = http;
    }
}

```

(2) 在resources/META-INF/services目录中添加com.test.guardian.core.GuardianModule文件, 文件中的内容为：
```com.test.guardian.http2.Http2Module ```

2. 在配置文件(starter模块中resources/guardian.yml)中添加新开发的模块名：http2，注意http2刚好对应于实现类Http2Module的名字





